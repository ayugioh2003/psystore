(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79520fe4"],{1799:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:1==t.pagination.current_page},on:{click:function(a){return a.preventDefault(),t.changePage(t.pagination.current_page-1)}}},[t._m(0)]),t._l(t.pagination.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page==a},on:{click:function(e){return e.preventDefault(),t.changePage(a)}}},[e("a",{staticClass:"page-link ",attrs:{href:"#"}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:t.pagination.current_page==t.pagination.total_pages},on:{click:function(a){return a.preventDefault(),t.changePage(t.pagination.current_page+1)}}},[t._m(1)])],2)])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])}],i={props:{pagination:{type:Object,required:!0}},methods:{changePage:function(t){var a=this;a.$emit("change-page",t)}}},n=i,o=(e("5eaf"),e("2877")),c=Object(o["a"])(n,s,r,!1,null,null,null);a["a"]=c.exports},3890:function(t,a,e){},"5eaf":function(t,a,e){"use strict";var s=e("3890"),r=e.n(s);r.a},7721:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._m(0),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},t._l(t.products,(function(a,s){return e("div",{key:a.key,staticClass:"col-md-6 col-lg-4 mb-3"},[e("div",{staticClass:"card h-100"},[e("img",{staticClass:"card-img-top",attrs:{src:a.imageUrl?a.imageUrl:"http://fakeimg.pl/500x300/#393?font=lobster",alt:"Card image cap"}}),e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex justify-content-between align-item-start"},[e("h5",{staticClass:"card-title"},[t._v(t._s(a.title))]),e("div",[e("span",{staticClass:"badge badge-pill badge-info"},[t._v(" "+t._s(a.category)+" ")])])]),e("p",{staticClass:"card-text text-secondary"},[t._v(" "+t._s(a.description)+" ")]),e("div",{staticClass:"d-flex justify-content-between"},[e("p",{staticClass:"card-text text-decoration-line-through"},[e("del",[t._v("原價 "+t._s(a.origin_price))])]),e("p",{staticClass:"card-text h5 text-right"},[t._v(" 限時特價 "+t._s(a.price)+" 元 ")])])]),e("div",{staticClass:"card-footer d-flex justify-content-between"},[e("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.openProductModal(a)}}},[t._v(" 查看更多 ")]),e("button",{staticClass:"btn btn-outline-danger",on:{click:[function(e){return t.addtoCart({product_id:a.id,qty:1})},function(a){a.preventDefault(),t.status.which_cartbtn_adding=s}]}},[t.status.is_cartbtn_adding&&t.status.which_cartbtn_adding==s?e("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}):t._e(),t._v(" 加到購物車 ")],1)])])])})),0),e("Pagination",{attrs:{pagination:t.pagination},on:{"change-page":t.getProducts}})],1),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-body"},[e("div",[e("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl?t.product.imageUrl:"https://dummyimage.com/500x300.jpg",alt:""}})]),e("div",{staticClass:"mt-3 mb-4"},[e("h5",[t._v(t._s(t.product.title))]),e("div",{staticClass:"text-secondary"},[t._v(t._s(t.product.description))])]),e("div",{staticClass:"d-flex justify-content-between"},[e("div",[e("del",[t._v("原價 "+t._s(t.product.origin_price))])]),e("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(t.product.price)+" 元")])]),e("div",{staticClass:"form-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.qty,expression:"product.qty"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.product,"qty",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0",disabled:"",selected:""}},[t._v("請選擇數量")]),t._l(10,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(" 選購 "+t._s(a)+" "+t._s(t.product.unit)+" ")])}))],2)])]),e("div",{staticClass:"modal-footer"},[e("span",[t._v("小計 "+t._s(t.product.price*t.product.qty)+" 元")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.addtoCart({product_id:t.product.id,qty:t.product.qty})}}},[t.status.is_cartbtn_adding?e("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}):t._e(),t._v(" 加到購物車 ")],1)])])])]),e("hr"),t._m(1),e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-8 mx-auto"},[e("table",{staticClass:"table"},[t._m(2),e("tbody",[t._l(t.cart.carts,(function(a){return e("tr",{key:a.id},[e("th",[e("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(e){return t.removeCartItem(a.id)}}},[e("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1)]),e("td",[e("div",[t._v(t._s(a.product.title))]),t.cart.total>t.cart.final_total?e("div",{staticClass:"text-success"},[t._v(" 已套用優惠券 ")]):t._e()]),e("td",[t._v(t._s(a.qty)+" 個")]),e("td",{staticClass:"text-right"},[t._v(t._s(a.total))])])})),e("tr",{class:{"text-secondary":t.cart.total>t.cart.final_total}},[e("td",{staticClass:"text-right ",attrs:{colspan:"3"}},[t._v("總計")]),e("td",{staticClass:"text-right",attrs:{colspan:"1"}},[t._v(t._s(t.cart.total))])]),t.cart.total>t.cart.final_total?e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("折扣價")]),e("td",{staticClass:"text-right",attrs:{colspan:"1"}},[t._v(t._s(t.cart.final_total))])]):t._e()],2)]),e("div",{staticClass:"input-group mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Insert coupon"},domProps:{value:t.couponCode},on:{input:function(a){a.target.composing||(t.couponCode=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(a){return t.addCouponCode(t.couponCode)}}},[t._v(" 套用優惠碼 ")])])])])]),e("hr"),t._m(3),e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-8 mx-auto"},[e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("form",{on:{submit:function(a){return a.preventDefault(),t.onSubmit(a)}}},[e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",attrs:{name:"Email",type:"email",id:"email"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("label",{attrs:{for:"name"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",attrs:{name:"收件人姓名",type:"text",id:"name"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("label",{attrs:{for:"tel"}},[t._v("收件人電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{name:"收件人電話",type:"tel",id:"tel"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("label",{attrs:{for:"address"}},[t._v("收件人地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{name:"收件人地址",type:"text",id:"address"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),e("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"message"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{id:"message",rows:"3"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s}},[t._v(" 送出訂單 ")])])])]}}])})],1)])])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("h1",{staticClass:"mt-3 mb-4"},[t._v("測試產品頁面")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("h2",{staticClass:"mb-3"},[t._v("測試購物車清單")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col",width:"100"}}),e("th",{attrs:{scope:"col"}},[t._v("品名")]),e("th",{attrs:{scope:"col"}},[t._v("數量")]),e("th",{attrs:{scope:"col"}},[t._v("單價")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("h2",{staticClass:"mb-3"},[t._v("測試結帳表單")])])}],i=e("5530"),n=e("1157"),o=e.n(n),c=e("2f62"),l=e("1799"),d={metaInfo:function(){return{title:"後台購物測試 | PsyStore"}},components:{Pagination:l["a"]},data:function(){return{product:{},couponCode:"",status:{which_cartbtn_adding:NaN,is_cartbtn_adding:!1},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:Object(i["a"])({},Object(c["c"])("product",["products","pagination"]),{},Object(c["c"])("cart",["cart"])),methods:Object(i["a"])({},Object(c["b"])(["addCouponCode","setIsLoading"]),{},Object(c["b"])("product",["getProducts"]),{},Object(c["b"])("cart",["getCart","addtoCart","removeCartItem"]),{},Object(c["b"])("order",["createOrder"]),{addtoCart:function(t){var a=this,e=this;e.status.is_cartbtn_adding=!0,this.$store.dispatch("cart/addtoCart",t).then((function(t){e.status.is_cartbtn_adding=!1,o()("#productModal").modal("hide"),a.$store.dispatch("alertMessage/updateMessage",{message:"".concat(t.data.message),status:t.data.success?"success":"warning"})}))},openProductModal:function(t){var a=this;a.product=Object(i["a"])({},t),a.$set(a.product,"qty",0),o()("#productModal").modal("show")},onSubmit:function(){var t=this;this.setIsLoading(!0),this.createOrder(this.form).then((function(a){t.setIsLoading(!1),t.$router.push("/back_order_checkout/".concat(a.data.orderId))}))}}),created:function(){this.getProducts(),this.getCart()}},u=d,p=e("2877"),m=Object(p["a"])(u,s,r,!1,null,null,null);a["default"]=m.exports}}]);
//# sourceMappingURL=chunk-79520fe4.226e381a.js.map